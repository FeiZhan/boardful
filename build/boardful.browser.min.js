/*! boardful browser 2015-01-25 */
var BOARDFUL=BOARDFUL||new Object;BOARDFUL.BRSR=BOARDFUL.BRSR||new Object,BOARDFUL.BRSR.CardUi=function(a,b){this.type="CardUi",this.instance=a,this.owner=b,BOARDFUL.Mngr.add(this);new BOARDFUL.CORE.FileLoader(["src/browser/card.html","src/browser/card.css"],function(){})},BOARDFUL.BRSR.CardUi.prototype.draw=function(a,b){a=a||new Object,a.parent=a.parent||"";var c=this;$.get("src/browser/card.html",function(d){$("#content "+a.parent).append(d),$("#content "+a.parent+" .card:last").attr("id",c.id);var e=$("#content #"+c.id);a.position&&e.css(a.position),e.find("h4").html(BOARDFUL.Mngr.get(c.instance).name),"function"==typeof b&&b(e)})},BOARDFUL.BRSR.CardUi.prototype.move=function(a){var b=$("#content #"+this.id);if(0==b.length){var c=this;this.draw({position:{top:"50%",left:"80%"}},function(){c.move(a)})}else b.animate({top:a.position.top,left:a.position.left},"slow",function(){b.css({top:0,left:0});var a=b.detach();$("#content #myhand").append(a)})};var BOARDFUL=BOARDFUL||new Object;BOARDFUL.BRSR=BOARDFUL.BRSR||new Object,BOARDFUL.BRSR.GameUi=function(a){this.type="GameUi",this.owner=a,this.owner&&(BOARDFUL.Mngr.add(this),BOARDFUL.CORE.Command.owner=this.owner),this.addListeners(),$("#content").empty(),$("#content").load("src/browser/game.html",function(){$("#content #ok").on("click",function(){})});new BOARDFUL.CORE.FileLoader(["src/browser/game.html","src/browser/game.css"],function(){})},BOARDFUL.BRSR.GameUi.prototype.addListeners=function(){var a=this;BOARDFUL.Mngr.get(this.owner).event_mngr.on("DealCardsUi",{level:"game",callback:function(b){a.dealCardsUi(b)},id:a.id})},BOARDFUL.BRSR.GameUi.prototype.dealCardsUi=function(a){console.log("deal cards",a.cards);for(var b in a.cards){var c=new BOARDFUL.BRSR.CardUi(a.cards[b],this);c.move({position:{top:"65%",left:"50%"}})}};var BOARDFUL=BOARDFUL||new Object;BOARDFUL.BRSR=BOARDFUL.BRSR||new Object,BOARDFUL.BRSR.run=function(){$("#header #options").click(function(){console.log("options")}),$("#content").empty(),$("#content").load("src/browser/menu0.html",function(){$("#content #main #local").click(function(){BOARDFUL.BRSR.loadMenu1()}),$("#content #secondary #options").click(function(){console.log("options")})});new BOARDFUL.CORE.FileLoader(["src/browser/menu0.html","src/browser/menu0.css"],function(){})},BOARDFUL.BRSR.Selected=void 0,BOARDFUL.BRSR.loadMenu1=function(){$("#content").empty(),$("#content").load("src/browser/menu1.html",function(){$("#content button#ok").click(function(){if(void 0!==BOARDFUL.BRSR.Selected){var a=BOARDFUL.Mngr.get(BOARDFUL.BRSR.Selected);a.load(BOARDFUL.BRSR.loadMenu2)}});for(var a in BOARDFUL.BoardList){var b=BOARDFUL.Mngr.get(BOARDFUL.BoardList[a]);$("#content #boardlist ul").append('<li id="'+BOARDFUL.BoardList[a]+'">'+b.config.name+"</li>"),$("#content #boardlist ul li:last").click(function(){BOARDFUL.BRSR.Selected=$(this).attr("id"),$("#content #boardlist li").removeClass("active"),$(this).addClass("active"),$("#content #descrip").html(BOARDFUL.Mngr.get(BOARDFUL.BRSR.Selected).config.descrip)})}});new BOARDFUL.CORE.FileLoader(["src/browser/menu1.html","src/browser/menu1.css"],function(){})},BOARDFUL.BRSR.loadMenu2=function(a){var b=BOARDFUL.Mngr.get(a);$("#content").empty(),$("#content").load("src/browser/menu2.html",function(){$("#content button#ok").on("click",function(){var b=new BOARDFUL.CORE.Game(a);b.ui=new BOARDFUL.BRSR.GameUi(b.id),b.run()}),$("#content #name").html(b.config.name),$("#content #descrip1").html(b.config.descrip),$("#content #players").append("<div><span>me</span></div>");for(var c=1;c<b.config.max_players;++c)$("#content #players").append("<div><span>empty</span></div>");for(var c in b.config.options){$("#content #roomoptions").append('<div id="'+c+'"></div>'),$("#content #roomoptions #"+c).append("<span>"+c+"</span><select></select>");for(var d in b.config.options[c].value)$("#content #roomoptions #"+c+" select").append('<option value="'+b.config.options[c].value[d]+'">'+b.config.options[c].value[d]+"</option>")}});new BOARDFUL.CORE.FileLoader(["src/browser/menu2.html","src/browser/menu2.css"],function(){})};