/*! boardful browser 2015-01-18 */
var BOARDFUL=BOARDFUL||new Object;BOARDFUL.init=function(){BOARDFUL.urlparam=BOARDFUL.ENGINE.parseUrl(),BOARDFUL.ENGINE.getFilesInHtml()};var BOARDFUL=BOARDFUL||new Object;BOARDFUL.ENGINE=BOARDFUL.ENGINE||new Object,BOARDFUL.ENGINE.FileList=new Object,BOARDFUL.ENGINE.FileNameList=new Object,BOARDFUL.ENGINE.NextFileId=0,BOARDFUL.ENGINE.addToFileList=function(a,b,c){a in BOARDFUL.ENGINE.FileNameList?BOARDFUL.ENGINE.FileList[BOARDFUL.ENGINE.FileNameList[a]]={name:a,content:b,status:c}:(BOARDFUL.ENGINE.FileList[BOARDFUL.ENGINE.NextFileId]={name:a,type:"",content:b,status:c},BOARDFUL.ENGINE.FileNameList[a]=BOARDFUL.ENGINE.NextFileId,++BOARDFUL.ENGINE.NextFileId)},BOARDFUL.ENGINE.getFilesInHtml=function(){$("script").each(function(){BOARDFUL.ENGINE.addToFileList($(this).attr("src"),$(this),"loaded")})},BOARDFUL.ENGINE.loadFile=function(a){".js"==a.substr(a.length-3)?$.getScript(a).done(function(b){BOARDFUL.ENGINE.addToFileList(a,b,"loaded")}).fail(function(){BOARDFUL.ENGINE.addToFileList(a,"","failed")}):".css"==a.substr(a.length-4)?($("head").append($('<link rel="stylesheet" type="text/css" />').attr("href",a)),BOARDFUL.ENGINE.addToFileList(a,"","loaded")):".json"==a.substr(a.length-5)?$.getJSON(a,function(b){BOARDFUL.ENGINE.addToFileList(a,b,"loaded")}).fail(function(){BOARDFUL.ENGINE.addToFileList(a,"","failed")}).always(function(){}):BOARDFUL.ENGINE.addToFileList(a,"","failed")},BOARDFUL.ENGINE.loadFileList=function(a,b){this.list=a,this.callback=b,this.done=!1,this.load()},BOARDFUL.ENGINE.loadFileList.prototype.load=function(){this.done=!0;for(var a in this.list)this.list[a]in BOARDFUL.ENGINE.FileNameList&&"loaded"==BOARDFUL.ENGINE.FileList[BOARDFUL.ENGINE.FileNameList[this.list[a]]].status||(this.done=!1,BOARDFUL.ENGINE.loadFile(this.list[a]));var b=this;this.done?this.callback():setTimeout(function(){b.load()},500)};var BOARDFUL=BOARDFUL||new Object;BOARDFUL.ENGINE=BOARDFUL.ENGINE||new Object,BOARDFUL.ENGINE.parseUrlParam=function(a){for(var b={},a=a||window.location.search.substring(1),c=a.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if("undefined"==typeof b[e[0]])b[e[0]]=e[1];else if("string"==typeof b[e[0]]){var f=[b[e[0]],e[1]];b[e[0]]=f}else b[e[0]].push(e[1])}return b},BOARDFUL.ENGINE.parseUrl=function(){var a=BOARDFUL.ENGINE.parseUrlParam(window.location.search.substring(1));a["#"]=window.location.hash.substring(1);var b=BOARDFUL.ENGINE.parseUrlParam(window.location.hash.substring(1));for(var c in b)c in a||(a[c]=b[c]);return a},BOARDFUL.ENGINE.getFunctionFromString=function(a){var b=window,c=a.split(".");for(i=0;i<c.length-1;i++)if(b=b[c[i]],void 0==b)return;return b[c[c.length-1]]};var BOARDFUL=BOARDFUL||new Object;BOARDFUL.MENUS=BOARDFUL.MENUS||new Object,BOARDFUL.MENUS.GameList=new Object,BOARDFUL.MENUS.run=function(){$("#content").empty(),$("#content").load("src/browser/menu0.html");new BOARDFUL.ENGINE.loadFileList(["src/browser/menus.css","src/engine/gamelist.json"],function(){BOARDFUL.MENUS.GameList=BOARDFUL.ENGINE.FileList[BOARDFUL.ENGINE.FileNameList["src/engine/gamelist.json"]].content.games,BOARDFUL.MENUS.loadGameList(BOARDFUL.MENUS.GameList)});$("#content button#ok").on("click",function(){void 0!==BOARDFUL.MENUS.Selected&&BOARDFUL.MENUS.Selected in BOARDFUL.MENUS.GameList&&BOARDFUL.MENUS.roomStart(BOARDFUL.MENUS.GameList[BOARDFUL.MENUS.Selected])})},BOARDFUL.MENUS.Selected=void 0,BOARDFUL.MENUS.loadGameList=function(a){for(var b in a)$("#content #gamelist ul").append('<li id="'+b+'">'+a[b].name+"</li>"),$("#content #gamelist ul li:last").click(function(){BOARDFUL.MENUS.Selected=$(this).attr("id"),$("#content #gamelist li").removeClass("active"),$(this).addClass("active"),$("#content #descrip").empty(),$("#content #descrip").append(a[BOARDFUL.MENUS.Selected].descrip)})},BOARDFUL.MENUS.roomStart=function(){$("#content").empty(),$("#content").load("src/browser/menu1.html");new BOARDFUL.ENGINE.loadFileList(["src/browser/menus.css","src/engine/gamelist.json"],function(){BOARDFUL.MENUS.GameList=BOARDFUL.ENGINE.FileList[BOARDFUL.ENGINE.FileNameList["src/engine/gamelist.json"]].content.games,BOARDFUL.MENUS.loadGameList(BOARDFUL.MENUS.GameList)});$("#content button#ok").on("click",function(){void 0!==BOARDFUL.MENUS.Selected&&BOARDFUL.MENUS.Selected in BOARDFUL.MENUS.GameList&&BOARDFUL.MENUS.roomStart(BOARDFUL.MENUS.GameList[BOARDFUL.MENUS.Selected])})};